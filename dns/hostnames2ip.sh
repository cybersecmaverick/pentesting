#!/bin/bash

############################################################################################################################
# Author: CyberSecMaverick
# Date: 10-07-2023
#
# Description:
# This is a quick bash script which takes hostnames or FQDNs in a text file and performs a DNS resolution lookup on them.
# It will return the hostname and its associated IP only. No extra faff. Just quick and dirty and gets to the point.
#
# Usage:
# 1. Add hostnames or FQDNs to 'hostnames.txt' in the same directory as this script, each on a separate line.
# 2. Run the script using: ./hostnames2ip.sh
# 3. The script will perform DNS resolution for each hostname and display the results including any errors.
############################################################################################################################

# File containing hostnames
hostnames_file="hostnames.txt"

# Check if the hostnames file exists
if [[ ! -f "$hostnames_file" ]]; then
  echo "Error: Hostnames file '$hostnames_file' not found."
  exit 1
fi

# Read hostnames from the file and perform name resolution
while read -r hostname; do
  echo -n "$hostname : "
  ip=$(nslookup "$hostname" | awk '/^Address: / { print $2 }')
  if [[ -n "$ip" ]]; then
    echo "$ip"
  else
    echo "Failed to resolve IP address for $hostname"
  fi
  echo
done < "$hostnames_file"
